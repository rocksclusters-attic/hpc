<section id="distributions">
<title> Rocks Linux Distributions </title>

<para>
A distribution is a collection of RPM software packages and an installation
environment used to initialize a Linux machine. The distributions in Rocks are
supersets of the RedHat Linux distribution, and have the same directory
structure.

</para>

<para>
While RedHat has one type of distribution, Rocks has three:

</para>

<itemizedlist>

<listitem>
<para>
<command>Mirror.</command> A collection of RPMS. The authoritative repository
of software for the cluster. RPMS from each installed roll are stored here.
In a mirror, rolls are kept separate from each other based on version,
architecture, and name.

</para>
</listitem>

<listitem>
<para>
<command>Distribution.</command> An extension of a Mirror. Contains RPMS
packages, the Rocks kickstart generation XML files, and a patched (extended)
version of the installation environment. A distribution is always generated by
the <literal>rocks-dist dist</literal> command run on the frontend. 

</para>

<para>
All cluster appliances use a distribution for installation. All roll RPMS
regardless of origin or architecture are stored together in a distribution.

</para>
</listitem>

<listitem>
<para>
<command>Pristine Distribution.</command> A distribution without any Roll RPMS. 
Contains only RPMS and kickstart nodes from Rocks base. Used to make CDs, and 
the Rocks Base distribution for WAN kickstart. This type of distribution is 
made with <literal>rocks-dist --pristine dist</literal>.

</para>
</listitem>

</itemizedlist>

<para>
When building a distribution, the rocks-dist command retrieves RPM packages
from several locations. 

</para>

<itemizedlist>

<listitem>
<para>
The mirror. This is specified in the rocks-dist config file (XML format):
<literal>/opt/rocks/etc/rocks-distrc</literal>.

</para>
</listitem>

<listitem>
<para>
The <literal>/usr/src/redhat</literal> directory and its children. This is
where the rpm system puts freshly built packages.

</para>
</listitem>

</itemizedlist>

<para>
If rocks-dist finds two or more packages with the same
name, it always chooses the RPM with the latest timestamp according to the
filesystem.

</para>
</section>
